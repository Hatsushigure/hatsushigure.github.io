title: 搞机需谨慎，卡米两行泪
author: 初時雨
email: Hatsushigure_c@163.com
readmore: true
hideTime: false
date: 2023-07-22 11:42:47
tags: [DSU Loader, Magisk, 小米, 刷机]
description: 手机差点就真的寄了啊
categories: 搞机
----------------

## 事件经过

### 序  章

今天又是平凡的一天(确信)
![人品: 17](https://i2.100024.xyz/2023/07/22/jv24ax.webp
 "什么嘛, 我运气还挺好的嘛")
~~于是闲得〇疼的我决定给自己找点活~~。走在路上, 我突然想起了我从未玩过的 [DSU Loader](https://developer.android.google.cn/topic/dsu?hl=zh-cn "DSU Loader")。正好我的手机支持, 我就打开了设置。
![](https://i2.100024.xyz/2023/07/22/kbs1xb.webp)
当然了, 我怎么会满足于遵守常规方法直接安装重启呢? 于是在进度条走完后, 我打开了 Magisk。「安装到未使用的槽位挺有意思的, 现在没有 OTA, 不如趁这个机会~~逝一逝~~」。
![](https://i2.100024.xyz/2023/07/22/kfj6lb.webp)
![](https://i2.100024.xyz/2023/07/22/kg6ifw.webp)
警告? 直接忽略! 干就完了!
### 心  脏  骤  停

很快啊, 我重启了。然后...咚!咚!噔!
![](https://i2.100024.xyz/2023/07/22/li45wi.webp "寄")
还能怎么办? 先照着办吧。按下电源键, 喜提卡米。又试了无数次之后, 问题依旧。最后, 我打开了 Recovery(**能打得开也是挺幸运的**)。选择安全模式之后, 因为上课的原因, 我把手机放在一旁。
#### ~~40 minutes later...~~

我再次拿起手机...~~好家伙差点把我的手烫熟~~整部手机的温度来到了接近 50℃, 并且依旧黑屏。这就是所谓变砖吗?
### 一线希望

在回家的路上, 我想了很多(~~你根本什么都没想吧バカ~~)。最后，我决定再试一次安全模式。毕竟这么高的温度万一把硬件烧坏了那不是寄上加寄吗。然后, 神奇的事情发生了。这次我直接进入了安全模式, 飞行模式是开的, 桌面图标全乱, 不过总算是**活下来了**。
至于 DSU Loader, 它的通知还活着。点了舍弃之后再重启就能正常进入系统了。之后就没什么多说的了, 重新启用模块, 重排桌面就行了。
### 奇  寄  再  现

还记得前面开机时的红字吗? 没错, 它没有消失。虽然表面上系统可以正常运行了, 但是开机时的警告还是预示着什么。简单 Bing 一下, 可以发现, 其实此时系统还是有损坏的, *不知道什么时候*可能再寄一次。OTA 能修复吗? 概率很大。好巧不巧, 我接到了 MIUI 14.0.30 的推送。安装更新时, 是这样的...(~~我才不会告诉你我忘了截图呢!(。・ω・。)~~)总是, 就是安装失败了。没办法, 只能下载完整包更新了。
## 原因猜想🤔

众所周知, Magisk 的安装需要对系统进行修改(如 `init_boot.img` 文件), 那么是否有一种可能, DSU Loader 里的原生 Android 不支持这种修改, 从而导致签名错误无法启动呢? 我认为很有可能。不过关掉 DSU Loader 后还报警告就有些奇怪了..
## 补充: 什么是 `DSU` 及 `DSU Loader`
> 动态系统更新 (DSU) 是 Android 10 中引入的一项系统功能，可执行以下操作：
>
> - 将新的 GSI（或其他 Android 系统映像）下载到您的设备上。
> - 创建新的动态分区。
> - 将下载的 GSI 加载到新的分区。
> - 在设备上将 GSI 作为来宾操作系统启动。
>
> DSU 还可让您在当前系统映像和 GSI 之间轻松切换，因此您在试用 GSI 时不会面临当前系统映像受损的风险。

人话: A/B 分区。
这一功能, 原本是设计用来提升系统更新的体验和安全性的。由于是对另一分区执行操作, 系统更新可以在用户使用手机时进行, 重启即可直接完成。而且, 由于两个 system 分区相互独立, 这种机制还可以有效防止更新时出现意外导致系统寄掉。毕竟还有一份可用的系统。
这么有用的功能, 当然不能只做一件事。于是 Google 推出了 DSU Loader 的功能, 也就是双系统, 但官方只支持内置的原生系统。通过第三方的 [DSU Sideloader](https://github.com/VegaBobo/DSU-Sideloader "DSU Sideloader"), 也可以实现加载其他系统。
## 写在最后

搞机一定要谨慎啊, 经常备份数据。不然变砖了就真的两行泪了。